---
title: React 17에서 import React from 'react' 구문 삭제하기
date: '2022-03-04'
lastmod: '2022-03-04'
tags: ['react']
draft: false
summary: 리액트 17버전부터는 기본적으로 JSX를 사용하기 위한 Import React 가 필요가 없어졌습니다. 그러니 삭제하는 작업을 해줍시다.
authors: ['default']
---

# React 17부터의 JSX 트랜스폼에는 `import React from 'react'`가 필요없어집니다.

React의 JSX구문을 사용하기 위해서는 React.createElement를 사용하여
ReactElement로 `트랜스폼`해주는 `import React from 'react'`를 필수적으로 넣어줘야 하는데요.
React 17부터는 필요없습니다.

React 18이 나오는 시점에서 좀 뜬금없을 수 있지만 이 사실을 모르고 있던 저는
프로젝트에서 꼬박꼬박 각 컴포넌트 파일의 최상단에 `import React from 'react'`를
넣어주고 있었습니다.

## React 17에서 JSX 트랜스폼의 방식이 바뀐 이유

앞서 얘기한것처럼 React 17부터는 `import React from 'react'`구문 없이도 JSX문법을 사용할 수 있습니다.
반대로 React 17이전 버전에서는 위 구문이 있어야 JSX 문법을 사용할 수 있습니다.
이렇게 말이죠.

```javascript
import React from 'react'

function App() {
  return <h1>Hello World</h1>
}
```

위와 같은 변화에는 이유가 있을텐데요,

[리액트 공식문서](https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#eslint)에서 설명하는 두가지 이유가 있습니다.

첫번째는 JSX가 `React.createElement`로 컴파일 되는 방식에서는 `JSX`를 사용하기 위해서 `React`가
스코프 내에 있어야 하기 때문입니다.

두번째는 `React.createElement`는 성능과 간결성에서 한계가 있었기 때문입니다.
이는 [여기](https://github.com/reactjs/rfcs/blob/createlement-rfc/text/0000-create-element-changes.md#motivation)에서 더 자세히 확인해 볼 수 있습니다.

## React Import를 제거하는 3단계

그럼 사내 프로젝트에서 적용했던 React Import 구문을 제거한 방식을 보겠습니다.

### eslint 설정 변경

eslint 설정에 `rules`를 추가해야했는데요, 저의 경우에는 이 eslint규칙이 사실상
React 17부터는 JSX를 사용하기 위해 `import React from 'react'`구문이 별도로 필요없어졌음에도 불구하고
계속 사용하고 있던 원인이 되었습니다.

기존에 설정되어있던 eslint rule에서는 위 구문없이 JSX를 사용할경우 lint error를 발생시켰기 때문입니다.
그러면 eslint rules를 리액트에서 권장하는대로 변경해보겠습니다.

```json
{
  // ...
  "rules": {
    // ...
    "react/jsx-uses-react": "off",
    "react/react-in-jsx-scope": "off"
  }
}
```

### typescript 설정 변경

> TypeScript supports the new JSX transform in v4.1 and up.

리액트 문서에서는 위와 같이 새로운 JSX 트랜스폼을 위한 타입스크립트 버전에 대해서는 명시해주고 있었는데요.

실제로 React Import 구문 없이 JSX를 사용할때 다음과 같은 타입스크립트 에러가 발생하는것을 확인했습니다.

`'React' refers to a UMD global, but the current file is a module `

이것은 tsconfig에서 `compilerOptions`중 `jsx`를 `react-jsx`로 변경해줌으로써 해결이 됩니다.

### codemod로 자동으로 구문제거(변경)

이 방식 역시 리액트 문서에 소개되어있는데

기존 상당히 많은 코드들을 직접 변경해주지 않아도 알아서 JSX를 사용하기 위해 `import React`구문을 사용하던것을 제거해주는 방법이 있습니다.

프로젝트 디렉토리에 들어가서

```linux
npx react-codemod update-react-imports
```

를 실행하면 디렉토리를 검색해서 불필요한 `import React` 구문을 제거해줍니다.

다만 `React.ReactElement`와 같이 Type을 위해 React를 import하는 경우처럼

사용되는 부분에 대해서는

`import * as React from 'react'` 로 전부 변경이 되었습니다.

이것은 common js때문인것같네요.
